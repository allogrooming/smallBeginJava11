<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Small Begin</title>

<script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/common.js"></script>

<!-- navbar 및 전체 css 관련 !-->
<link th:href="@{/css/common.css}" rel="stylesheet" />
<link th:href="@{/css/navbar.css}" rel="stylesheet" />
<link th:href="@{/css/footer.css}" rel="stylesheet" />
<!--<link th:href="@{/css/calendar1.css}" rel="stylesheet" />-->
<link th:href="@{/css/calendar2.css}" rel="stylesheet" />
<link th:href="@{/css/resetCSS.css}" rel="stylesheet" />
<script th:src="@{/js/navbar.js}"></script>
<script th:src="@{/js/calendar1.js}"></script>
<script th:src="@{/js/infiniteScroll.js}"></script>
<script th:src="@{/js/common.js}"></script>

</head>
<body>
<th:block th:replace="fragment/sideMenu :: sideMenuFragment"></th:block>
<div id="container">
<!--<div th:replace="/fragment/navbar.html :: fragment-nav"></div>-->
    <div class="main">
        <div class="content-wrap">
<!--            <div class="content-left">-->
<!--                <div class="main-wrap">-->
<!--                    <span id="main-month" class="main-month"></span> &nbsp;-->
<!--                    <span id="main-date" class="main-date"></span> &nbsp;-->
<!--                    <span id="main-day" class="main-day"></span>-->
<!--                    <span id="main-year" class="main-day"></span>-->
<!--                </div>-->
<!--                <div class="todo-wrap">-->
<!--                    <div class="todo-title">You can add "todo list" here</div>-->
<!--                    <div class="input-wrap">-->
<!--                        <form method="post" id="toDoList">
                            <input type="text" placeholder="please write here" id="toDoContent" class="input-box" name="toDoContent">
                            <input type="date" id="planDate" class="input-box" name="planDate">
                            <input type="date" id="setUpDate" class="input-box" name="setUpDate" style="display: none"></input>
                            <input type="color" id="toDoColor" name="toDoColor" value="#16aaad" list="colors4palette" />
                            <datalist id="colors4palette">
                                <option>#355070</option>
                                <option>#6D597A</option>
                                <option>#B56576</option>
                                <option>#E56B6F</option>
                                <option>#EAAC8B</option>
                            </datalist>
                            <button type="button" id="input-data" class="input-data">INPUT</button>
                        </form>-->
<!--                        <table id="toDoListsTable">-->
<!--                            <tr>-->
<!--                                <td>Color</td><td>Content</td><td>State</td>-->
<!--                            </tr>-->
<!--                        </table>-->
<!--                        <table id="iniAndObTable">-->
<!--                            <tr>-->
<!--                                <td>Ob Content</td><td>Ini Content</td><td>State</td>-->
<!--                            </tr>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
            <div class="content-right">
                <div id="current-year-month-div">
                    <table>
                        <tr class="btn-wrap clearfix">
                            <td align="center" id="current-year-month" colspan="7"></td>
                        </tr>
                        <tr id="day-list">
                            <td class = "sun" align="center">Sun</td>
                            <td align="center">Mon</td>
                            <td align="center">Tue</td>
                            <td align="center">Wed</td>
                            <td align="center">Thu</td>
                            <td align="center">Fri</td>
                            <td class= "sat" align="center">Sat</td>
                        </tr>
                    </table>
                </div>
                <table id="calendar" align="center">
<!--                    <thead id = "calendar-head">-->
<!--                    <tr class="btn-wrap clearfix">-->
<!--&lt;!&ndash;                        <td>&ndash;&gt;-->
<!--&lt;!&ndash;                            <label id="prev">&ndash;&gt;-->
<!--&lt;!&ndash;                                &#60;&ndash;&gt;-->
<!--&lt;!&ndash;                            </label>&ndash;&gt;-->
<!--&lt;!&ndash;                        </td>&ndash;&gt;-->
<!--                        <td align="center" id="current-year-month" colspan="7"></td>-->
<!--&lt;!&ndash;                        <td>&ndash;&gt;-->
<!--&lt;!&ndash;                            <label id="next">&ndash;&gt;-->
<!--&lt;!&ndash;                                &#62;&ndash;&gt;-->
<!--&lt;!&ndash;                            </label>&ndash;&gt;-->
<!--&lt;!&ndash;                        </td>&ndash;&gt;-->
<!--                    </tr>-->
<!--                    <tr id="calendar-top">-->
<!--                        <td class = "sun" align="center">Sun</td>-->
<!--                        <td align="center">Mon</td>-->
<!--                        <td align="center">Tue</td>-->
<!--                        <td align="center">Wed</td>-->
<!--                        <td align="center">Thu</td>-->
<!--                        <td align="center">Fri</td>-->
<!--                        <td class= "sat" align="center">Sat</td>-->
<!--                    </tr>-->
<!--                    </thead>-->
                    <tbody id="calendar-body"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!--<footer th:replace="/fragment/footer.html :: fragment-footer"></footer>-->
</body>

<script>
<!--    YesScroll();-->

<!--    var selectedDate = document.getElementById("setUpDate").innerText;-->
<!--    console.log("selectedDate - html reshowing");-->
<!--    console.log(selectedDate);-->
<!--    reshowingList(selectedDate);-->

<!--    var clickedDate1 = document.getElementById(today.getDate());-->
<!--    clickedDate1.classList.add('active');-->

    $("#prev").click(function(){
        prev();
    })

    $("#next").click(function(){
        next();
    })

    $(document).ready(function(){
        console.log("start");
        attachMain();
        clickDate();

        $("#input-data").click(function(){
            readForm("#toDoList", "/toDoList");
            var planDate = $('planDate').val();
            console.log("create todo");
        });

        $(".td-date").on("click", function(){
            console.log("td-date click");
            loadCalendar(2);
        });

        $('#calendar td').click(function(){
            var tdID = $(this).attr('id');
            console.log("click!!");
            var param4readToDo = getDate4Ajax(tdID);
            console.log(param4readToDo);
            readToDo(param4readToDo);
        });

        $('#toDoListsTable').on("click", ".delete", function(){
            var deleteId = $(this).attr('id');
            var selectedDate = $(".active").attr('id');
            deleteTodo(deleteId, selectedDate);
            readToDo(selectedDate);
            //reload
        });

        $('#toDoListsTable').on("click", ".edit", function(){
            var tr = $(this).attr('class');
            var rowNum = tr.substr(5);
            rowNum++;
            var tableTr = document.getElementById("toDoListsTable").getElementsByTagName("tr");
            var selectedTr = tableTr[rowNum];
            var colorCol = selectedTr.children[0];
            var contentCol = selectedTr.children[1];
            var complete = selectedTr.children[4];

            colorCol.id = "editColorTd";
            contentCol.id = "editContent";
            complete.id = "complete";
            colorCol.innerHTML = '<input type="color" id="editColor" name="toDoColor"/>';
            complete.innerText = 'submit';
            contentCol.contentEditable = 'true';

            // submit 클릭 시 colorCol, contentCol에서 입력 받은 값을 updateTodo 메소드로 전달
            $("#complete").on("click", function(){
                var sendColor = $("#editColor").val();
                var sendContent = $("#editContent").text();
                var clickedDate = $(".active").attr("id");
                var toDoCode = $(this).prev().attr("id");
                console.log(sendColor);
                console.log(sendContent);
                console.log(clickedDate);
                console.log(toDoCode);
                editTodo(sendColor, sendContent, clickedDate, toDoCode);
                complete.innerText = 'edit';
            });

            //var editId = $(this).attr('id');
        });
    });

<!-- $(document).on("click", ".scroll_to", function(){-->
<!--        console.log("delete??");-->
<!--        var deleteId = $(this).attr('id');-->
<!--        console.log(deleteId);-->
<!--        deleteTodo(deleteId);-->
<!--        $(this).parent().remove;-->
<!--    });-->
</script>
</html>

