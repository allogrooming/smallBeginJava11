<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.smallbeginjava11.mapper.JoinMapper">

    <insert id="insertMember" parameterType="hashMap">
        INSERT INTO member(
            member_code,
            member_id,
            password,
            nickname,
            email,
            sign_up_date,
            active_state
        )
        VALUES(
                      (select IFNULL(MAX(a.member_code), 0) + 1 FROM member a),
                      #{memberId},
                      #{password},
                      #{nickname},
                      #{email},
                      default,
                      1
              )
    </insert>

    <select id="checkId" parameterType="hashMap" resultType="int">
        select count(member_id) from member where member_id = #{memberId}
    </select>

    <select id="checkNick" parameterType="hashMap" resultType="int">
        select count(nickname) from member where nickname = #{nickname}
    </select>

</mapper>